#!/bin/bash

HOST="`hostname`"
DIR="$HOME/.dotfiles/homebrew/lists/$HOST"
mkdir -p "$DIR"
cd "$DIR"

echo "Updating homebrew list files for $HOST.."
brew list > brew.$HOST.list
brew tap > brew-tap.$HOST.list
brew cask list > brew-cask.$HOST.list
mas list > mas.$HOST.list

brew bundle dump --force
mv ./Brewfile Brewfile.$HOST.list

# echo Staging in git..
# git add brew.list
# git add brew-tap.list
# git add brew-cask.list

# echo Diffs..
# git diff brew.list
# git diff brew-tap.list
# git diff brew-cask.list
# git diff Brewfile.list
# git diff mas.list
git status
